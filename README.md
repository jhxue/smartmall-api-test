# SmartMall API Test

[![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![Pytest](https://img.shields.io/badge/Pytest-7.0+-green.svg)](https://docs.pytest.org/)
[![Allure](https://img.shields.io/badge/Allure-2.9+-orange.svg)](https://docs.qameta.io/allure/)

## é¡¹ç›®ç®€ä»‹

SmartMall API Test æ˜¯ä¸€ä¸ªåŸºäºPythonçš„REST APIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œä¸“é—¨ç”¨äºæµ‹è¯•æ™ºèƒ½å•†åŸç³»ç»Ÿçš„å„ç§APIæ¥å£ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„æµ‹è¯•æ¶æ„ï¼Œæä¾›å®Œæ•´çš„APIæµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚

## åŠŸèƒ½ç‰¹æ€§

-  **ç”¨æˆ·æ³¨å†Œä¸è®¤è¯** - æ”¯æŒç”¨æˆ·æ³¨å†Œã€ç™»å½•åŠŸèƒ½æµ‹è¯•
-  **ç”¨æˆ·ä¿¡æ¯ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥æµ‹è¯•
-  **å•†åº—ç®¡ç†** - å•†åº—åˆ›å»ºã€æŸ¥è¯¢ç­‰åŠŸèƒ½æµ‹è¯•
-  **å•†å“ç®¡ç†** - å•†å“çš„æ·»åŠ ã€ä¿®æ”¹ã€æŸ¥è¯¢æµ‹è¯•
-  **ç”¨æˆ·ä½™é¢** - ç”¨æˆ·ä½™é¢ç®¡ç†åŠŸèƒ½æµ‹è¯•
-  **æ”¯ä»˜åŠŸèƒ½** - å•†å“è´­ä¹°ã€æ”¯ä»˜æµç¨‹æµ‹è¯•
-  **æµ‹è¯•æŠ¥å‘Š** - åŸºäºAllureæ¡†æ¶çš„ç¾è§‚æµ‹è¯•æŠ¥å‘Š

## æŠ€æœ¯æ ˆ

- **Python 3.9+** - ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Pytest** - æµ‹è¯•æ¡†æ¶
- **Requests** - HTTPè¯·æ±‚åº“
- **Allure Framework** - æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
- **Faker** - æµ‹è¯•æ•°æ®ç”Ÿæˆ
- **Flask** - MockæœåŠ¡å™¨

## é¡¹ç›®ç»“æ„

```
smartmall-api-test/
â”œâ”€â”€ common/                 # å…¬å…±å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ deco.py            # è£…é¥°å™¨
â”œâ”€â”€ fixtures/              # æµ‹è¯•å¤¹å…·
â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ balance/           # ä½™é¢ç›¸å…³
â”‚   â”œâ”€â”€ magazine/          # å•†åº—ç›¸å…³
â”‚   â”œâ”€â”€ pay/               # æ”¯ä»˜ç›¸å…³
â”‚   â”œâ”€â”€ register/          # æ³¨å†Œç›¸å…³
â”‚   â”œâ”€â”€ store_item/        # å•†å“ç›¸å…³
â”‚   â”œâ”€â”€ store_items/       # å•†å“åˆ—è¡¨ç›¸å…³
â”‚   â””â”€â”€ userInfo/          # ç”¨æˆ·ä¿¡æ¯ç›¸å…³
â”œâ”€â”€ mock_server/           # MockæœåŠ¡å™¨
â”‚   â””â”€â”€ app.py            # Flaskåº”ç”¨
â”œâ”€â”€ tests/                 # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ authorization/     # è®¤è¯æµ‹è¯•
â”‚   â”œâ”€â”€ pay_item/         # æ”¯ä»˜æµ‹è¯•
â”‚   â”œâ”€â”€ register/         # æ³¨å†Œæµ‹è¯•
â”‚   â”œâ”€â”€ store_item/       # å•†å“æµ‹è¯•
â”‚   â”œâ”€â”€ store_items/      # å•†å“åˆ—è¡¨æµ‹è¯•
â”‚   â”œâ”€â”€ store_magazine/   # å•†åº—æµ‹è¯•
â”‚   â”œâ”€â”€ user_balance/     # ç”¨æˆ·ä½™é¢æµ‹è¯•
â”‚   â””â”€â”€ user_info/        # ç”¨æˆ·ä¿¡æ¯æµ‹è¯•
â”œâ”€â”€ allure-results/        # Allureæµ‹è¯•ç»“æœ
â”œâ”€â”€ conftest.py           # Pytesté…ç½®
â”œâ”€â”€ pytest.ini           # Pytestè®¾ç½®
â””â”€â”€ requirements.txt      # é¡¹ç›®ä¾èµ–
```

## å®‰è£…æŒ‡å—

### å‰ç½®è¦æ±‚

- Python 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- Java 8+ (ç”¨äºAllureæŠ¥å‘Š)
- Git

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd smartmall-api-test
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
python -m venv venv
```

### 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

**Windows:**
```bash
venv\Scripts\activate
```

**Linux/Mac:**
```bash
source venv/bin/activate
```

### 4. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 5. å®‰è£…Allure (å¯é€‰)

**Windows (ä½¿ç”¨Scoop):**
```bash
scoop install allure
```

**Mac (ä½¿ç”¨Homebrew):**
```bash
brew install allure
```

**æˆ–è€…ä¸‹è½½å®‰è£…åŒ…:** [Allureå®˜æ–¹ä¸‹è½½](https://docs.qameta.io/allure/)

## ä½¿ç”¨è¯´æ˜

### å¯åŠ¨MockæœåŠ¡å™¨

åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰ï¼Œéœ€è¦å…ˆå¯åŠ¨MockæœåŠ¡å™¨ï¼š

```bash
cd mock_server
python app.py
```

æœåŠ¡å™¨å°†åœ¨ `http://127.0.0.1:8080` å¯åŠ¨

### è¿è¡Œæµ‹è¯•

**è¿è¡Œæ‰€æœ‰æµ‹è¯•:**
```bash
pytest
```

**è¿è¡Œç‰¹å®šæµ‹è¯•æ¨¡å—:**
```bash
pytest tests/register/
pytest tests/store_item/
```

**è¿è¡Œæ­£å‘æµ‹è¯•:**
```bash
pytest -m positive
```

**è¿è¡Œè´Ÿå‘æµ‹è¯•:**
```bash
pytest -m negative
```

**ç”ŸæˆAllureæŠ¥å‘Š:**
```bash
pytest --alluredir=allure-results
```

**æŸ¥çœ‹AllureæŠ¥å‘Š:**
```bash
allure serve allure-results
```

### APIæµ‹è¯•è¦†ç›–

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| ç”¨æˆ·æ³¨å†Œ | ç”¨æˆ·æ³¨å†Œã€æ•°æ®éªŒè¯ | âœ… |
| ç”¨æˆ·è®¤è¯ | ç™»å½•ã€TokenéªŒè¯ | âœ… |
| ç”¨æˆ·ä¿¡æ¯ | æ·»åŠ ã€æŸ¥è¯¢ã€åˆ é™¤ç”¨æˆ·ä¿¡æ¯ | âœ… |
| å•†åº—ç®¡ç† | åˆ›å»ºå•†åº—ã€æŸ¥è¯¢å•†åº— | âœ… |
| å•†å“ç®¡ç† | æ·»åŠ ã€ä¿®æ”¹ã€æŸ¥è¯¢å•†å“ | âœ… |
| å•†å“åˆ—è¡¨ | è·å–å•†å“åˆ—è¡¨ | âœ… |
| ç”¨æˆ·ä½™é¢ | æ·»åŠ ã€æŸ¥è¯¢ç”¨æˆ·ä½™é¢ | âœ… |
| æ”¯ä»˜åŠŸèƒ½ | å•†å“è´­ä¹°æµç¨‹ | âœ… |

## æµ‹è¯•æŠ¥å‘Š

é¡¹ç›®ä½¿ç”¨Allureæ¡†æ¶ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š

- ğŸ“ˆ æµ‹è¯•æ‰§è¡Œæ¦‚è§ˆ
- ğŸ“Š æµ‹è¯•ç»“æœç»Ÿè®¡
- ğŸ“ è¯¦ç»†çš„æµ‹è¯•æ­¥éª¤
- ğŸ› å¤±è´¥ç”¨ä¾‹åˆ†æ
- ğŸ“¸ è¯·æ±‚å“åº”æˆªå›¾

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼